<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html ng-app="myapp">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

<title>VIA Request</title>

<script
	src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.0/angular.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/1.0.3/angular-ui-router.js"></script>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<style>
table, th, td {
	border: 1px solid black;
	border-collapse: collapse;
}

th, td {
	padding: 5px;
	text-align: left;
}
</style>





</head>

<script>
	function myFunction() {
		//	alert("inside" + " " + document.getElementById("appType").value);
		if ((document.getElementById("appType").value == "2")
				|| (document.getElementById("appType").value == "6")) {
			//	alert("inside 2");
			document.getElementById("ifYes").style.display = "";
		}
		document.getElementById("recapp").style.display = "";
		document.getElementById("recapp2").style.display = "";
		document.getElementById("recapp3").style.display = "";

	}
	function myFunction2() {
		if ((document.getElementById("recType").value == "2")
				|| (document.getElementById("recType").value == "6")) {
			document.getElementById("isSupp").style.display = "";
		}
	}
	function myFunctionPrint() {

		var supp = document.getElementById("appType").value;
		var supr = document.getElementById("recType").value;
		var val;
		//alert(supp+" "+supr);
		if ((supp == "1" || supp == "3" || supp == "4" || supp == "5")
				&& (supr == "1" || supr == "3" || supr == "4" || supr == "5")) {
			val = [ document.getElementById("appType").value + ":"
					+ document.getElementById("msgSize").value + ":"
					+ document.getElementById("volPerHour").value + ":"
					+ document.getElementById("depType").value + ":"
					+ document.getElementById("encType").value + ":"
					+ document.getElementById("recType").value + ":"
					+ document.getElementById("formatType").value + ":"
					+ document.getElementById("routeType").value ];

		} else if (supp == "1" || supp == "3" || supp == "4" || supp == "5") {
			supr = document.getElementById("suprType").value;
			val = [ document.getElementById("appType").value + ":"
					+ document.getElementById("msgSize").value + ":"
					+ document.getElementById("volPerHour").value + ":"
					+ document.getElementById("depType").value + ":"
					+ document.getElementById("encType").value + ":"
					+ document.getElementById("recType").value + ":" + supr
					+ ":" + document.getElementById("formatType").value + ":"
					+ document.getElementById("routeType").value ];
		}

		else if (supr == "1" || supr == "3" || supr == "4" || supr == "5") {
			supp = document.getElementById("suppType").value;
			val = [ document.getElementById("appType").value + ":"
					+ document.getElementById("msgSize").value + ":"
					+ document.getElementById("volPerHour").value + ":"
					+ document.getElementById("depType").value + ":"
					+ document.getElementById("encType").value + ":" + supp
					+ ":" + document.getElementById("recType").value + ":"
					+ document.getElementById("formatType").value + ":"
					+ document.getElementById("routeType").value ];

		} else {
			supr = document.getElementById("suprType").value;
			supp = document.getElementById("suppType").value;
			//  alert(supp+" "+supr);
			val = [ document.getElementById("appType").value + ":"
					+ document.getElementById("msgSize").value + ":"
					+ document.getElementById("volPerHour").value + ":"
					+ document.getElementById("depType").value + ":"
					+ document.getElementById("encType").value + ":" + supp
					+ ":" + document.getElementById("recType").value + ":"
					+ supr + ":" + document.getElementById("formatType").value
					+ ":" + document.getElementById("routeType").value ];

		}
		document.getElementById("output").value = val;
		document.getElementById("display").innerHTML = val;
	}
</script>

<body ng-controller="shiftAllowanceController" ng-submit="processForm()">


	<nav class="navbar navbar-default"> <a class="navbar-brand"
		href="#"> <img src="VIA.jpg" style="display: inline-block;">
	</a>

	<div class="container-fluid">
		<div class="navbar-header">
			<a class="navbar-brand" href="#">Volvo Integration Application</a>
		</div>
		<ul class="nav navbar-nav">
			<li><a href="index.html">Home</a></li>
		</ul>

		<ul class="nav navbar-nav">
			<li class="active"><a href="#">Request Integration Pattern</a></li>
		</ul>
	</div>


	</nav>

	<img src="Brands_VG.png" />





	<h5>Enter below required details for Integration Pattern:</h5>


	<form name="form">
        <div  class="well well-sm " style="margin-left: 20px !important; 
       margin-right: 20px; padding: 4px !important; min-height: 200px; ">
			<div class="form-group">
				<label for="listAppType">Please select the application type:</label>
				<select ng-model="appType" name="appType" id="appType">
					<option ng-repeat="st in  listShiftType" value="{{st.id}}">{{st.name}}</option>
				</select>
			</div>

			<div class="form-group">
				<label for="listGrade"><b>Message size in KB:</b></label> <input
					ng-model="msgSize" type="text" name="msgSize" id="msgSize">
			</div>

			<div class="form-group">
				<label for="listTimePeriod"><b>Volumes per Hour:</b></label> <input
					ng-model="volPerHour" type="text" name="volPerHour" id="volPerHour">
			</div>

			<div class="form-group">
				<label for="listSyncPeriod"><b>High Synchronous
						Dependency:</b></label> <select ng-model="depType" name="depType" id="depType">
					<option></option>
					<option value="1">YES</option>
					<option value="0">NO</option>
				</select>
			</div>

			<div class="form-group">
				<label for="listSyncPeriod"><b>Encryption required?</b></label> <select
					ng-model="encType" name="encType" id="encType"
					onchange="myFunction()">
					<option></option>
					<option value="1">YES</option>
					<option value="0">NO</option>
				</select>
			</div>

			<div id="recapp" class="form-group" style="display: none;">
				<label>select receiving application type</label> <select
					ng-model="recType" name="recType" id="recType"
					onchange="myFunction2()">
					<option></option>
					<option value="1">VGTA</option>
					<option value="2">COTS</option>
					<option value="3">SAP</option>
					<option value="4">VCOM</option>
					<option value="5">BI</option>
					<option value="6">External</option>
				</select>
			</div>

			<div id="ifYes" class="form-group" style="display: none;">
				<label>Connectivity supported by sending application</label> <select
					ng-model="suppType" name="suppType" id="suppType">
					<option></option>
					<option value="1">MQ</option>
					<option value="2">Web Service</option>
					<option value="3">SFTP</option>
					<option value="4">FILE</option>
				</select>
			</div>

			<div id="isSupp" class="form-group" style="display: none;">
				<label>Connectivity supported by receiving application</label> <select
					ng-model="suprType" name="suprType" id="suprType">
					<option></option>
					<option value="1">MQ</option>
					<option value="2">Web Service</option>
					<option value="3">SFTP</option>
					<option value="4">FILE</option>
				</select>
			</div>


			<div id="recapp2" class="form-group" style="display: none;">
				<label>Is sending application message format same as
					receiving application format?</label> <select ng-model="formatType"
					name="formatType" id="formatType">
					<option></option>
					<option value="1">YES</option>
					<option value="0">NO</option>
				</select>
			</div>

			<div id="recapp3" class="form-group" style="display: none;">
				<label>Routing required?</label> <select ng-model="routeType"
					name="routeType" id="routeType">
					<option></option>
					<option value="1">YES</option>
					<option value="0">NO</option>
				</select>
			</div>

		
			<div>
				<a href='requestIntegrationForm.html' class="btn btn-primary btn-sm"><span>Search
						Again!</span></a>

				<button class="btn btn-primary btn-sm" type="submit" ng-click="submit()">
					Submit!</button>
			</div>

		</div>

		<div id="integrationAnswers" class="well well-sm"
			style="margin-top: 10px; margin-bottom: 10px;">
			<b>Computed Integration Pattern :</b> <span>
				{{responePattern}} </span>
		</div>


	</form>

	<script type="text/javascript">
		var myapp = angular.module('myapp', []);

		myapp
				.controller(
						'shiftAllowanceController',
						function($scope, $window, $http) {

							$http
									.get(
											'http://via-app1.us-west-2.elasticbeanstalk.com/rest/json/patterndata/fetchAllApplicationType')
									.success(
											function(response) {
												$scope.listShiftType = response;
												console.log("Hello "
														+ $scope.listShiftType
														+ "listShiftType");
											});

							$scope.processForm = function() {
								$http(
										{
											method : 'POST',
											url : 'http://via-app1.us-west-2.elasticbeanstalk.com/rest/json/patterndata/submitIntegrationRequest',
											data : $
													.param({
														"appType" : $scope.appType,
														"msgSize" : $scope.msgSize,
														"volPerHour" : $scope.volPerHour,
														"depType" : $scope.depType,
														"encType" : $scope.encType,
														"recType" : $scope.recType,
														"suppType" : $scope.suppType,
														"suprType" : $scope.suprType,
														"formatType" : $scope.formatType,
														"routeType" : $scope.routeType
													}),
											headers : {
												'Content-Type' : 'application/x-www-form-urlencoded'
											}
										}).success(function(data) {
									$scope.responePattern = data;
								});

							};

						});
	</script>

	<nav class="navbar navbar-default">
	<p class="navbar-text">VIA Team</p>
	</nav>

</body>
</html>